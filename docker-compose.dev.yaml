version: "3"

services:

  postgres:
    container_name: "issues-dashboard-postgres"
    image: "postgres:12.2"
    environment:
      POSTGRES_PASSWORD: "postgres"
    ports:
      - "5432:5432"

  adminer:
    image: "adminer"
    ports:
      - "8080:8080"

  server:
    container_name: "issues-dashboard-server"
    build:
      context: "./server"
      dockerfile: "Dockerfile.dev"
    command: "npm run start:dev"
    env_file:
      - "server/.env.dev"
    volumes:
      - "./server:/app"
      - "/app/node_modules"
    ports:
      - "3001:3000"

  ui:
    container_name: "issues-dashboard-ui"
    build:
      context: "./ui"
      dockerfile: "Dockerfile.dev"
    command: "npm run start"
    stdin_open: true
    volumes:
      - "./ui:/app"
      - "/app/node_modules"
    ports:
      - "3000:3000"
